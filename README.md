
# CS 895 NLP 

---

## Environmental Setup

Pre-Requisites - 
* Python 3 : [https://www.python.org/downloads/](https://www.python.org/downloads/)
* Pip : [https://pypi.org/project/pip/](https://pypi.org/project/pip/)

1. Install and Enable Python Virtual Environments (Optional)

* Installation [https://docs.python.org/3/library/venv.html](https://docs.python.org/3/library/venv.html)
* Create a virtual environment
```shell
python3 -m venv /path/to/new/virtual/environment
```
* Enable virtual environment
```shell
source /path/to/new/virtual/environment/bin/activate
```

2. Install Dependencies
```shell
pip install -r requirements.txt
```


## Data Extraction

Data extraction uses following environment variables as configuration parameters

| Environment Variable | Description                        |
|---	                |---	                            |
| DATA_DIRECTORY        | Path to save the extracted data.  |
| START                 | Start date for data extraction.   |
| END                   | End date for data extraction.     |
| REDDIT_CLIENT_ID      | Reddit API client ID              |
| REDDIT_CLIENT_SECRET  | Reddit API client secret          |
| REDDIT_USER_AGENT     | Reddit API user agent             |
| MAX_RETRIES           | Maximum retries for API request failures |

Before execution of the script, export applicable environment variables.

```shell
export DATA_DIRECTORY="data/"
export START="2020-10-19"
export END="2021-10-19"
```

Run the extraction script (The execution time depends on the date range, number of posts and size of posts)
```shell
python data_extractors/extraction/reddit.py
```

## Data Processing

```shell
python process_data.py [-h] [--action {combine-files,token-count,emoji-count,unique-user-count,popularity}] [action-specific-params]
```

| Action        | Description                                                               |
|---            |---                                                                        |
| combine-files | Combines individual files generated by the Reddit extraction script.      |
| token-count   | Generate daily token counts for the given tokens.                         |
| emoji-count   | Generate daily emoji counts for the given set of emojicons.               |
| unique-user-count | Generate number of unique users per day.                              |
| popularity        | Generate the average score (popularity) of posts extracted per day.   |

## Data Analysis

Refer the Jupyter notebooks in the root folder. (Files with `.pynb` extension)

### TODO - Issues with dataset
* Empty discussion for : January 27, 2021, October 21, 2019
* Check missing files/ discussions: Part 2, for January 28, 2021 (available),
* (New) Unique user count is always around 400. (Even for dates with higher Reddit activity)